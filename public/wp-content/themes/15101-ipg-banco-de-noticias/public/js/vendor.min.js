!function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=s(String(e||"").toLowerCase()),!e||!e.length)return[];var t,i,o,a,l=[],c=e.split(/ +/);for(t=0,i=c.length;i>t;t++){if(o=n(c[t]),this.settings.diacritics)for(a in r)r.hasOwnProperty(a)&&(o=o.replace(new RegExp(a,"g"),r[a]));l.push({string:c[t],regex:new RegExp(o,"i")})}return l},e.prototype.iterator=function(e,t){var i;i=o(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},i.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,s,n,o;i=this,e=i.prepareSearch(e,t),n=e.tokens,s=e.options.fields,o=n.length;var r=function(e,t){var i,s;return e?(e=String(e||""),s=e.search(t.regex),-1===s?0:(i=t.string.length/e.length,0===s&&(i+=.5),i)):0},a=function(){var e=s.length;return e?1===e?function(e,t){return r(t[s[0]],e)}:function(t,i){for(var n=0,o=0;e>n;n++)o+=r(i[s[n]],t);return o/e}:function(){return 0}}();return o?1===o?function(e){return a(n[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,s=0;o>i;i++){if(t=a(n[i],e),0>=t)return 0;s+=t}return s/o}:function(e){for(var t=0,i=0;o>t;t++)i+=a(n[t],e);return i/o}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var s,n,o,r,a,l,c,u,d,h,p;if(o=this,e=o.prepareSearch(e,i),p=!e.query&&i.sort_empty||i.sort,d=function(e,t){return"$score"===e?t.score:o.items[t.id][e]},a=[],p)for(s=0,n=p.length;n>s;s++)(e.query||"$score"!==p[s].field)&&a.push(p[s]);if(e.query){for(h=!0,s=0,n=a.length;n>s;s++)if("$score"===a[s].field){h=!1;break}h&&a.unshift({field:"$score",direction:"desc"})}else for(s=0,n=a.length;n>s;s++)if("$score"===a[s].field){a.splice(s,1);break}for(u=[],s=0,n=a.length;n>s;s++)u.push("desc"===a[s].direction?-1:1);return l=a.length,l?1===l?(r=a[0].field,c=u[0],function(e,i){return c*t(d(r,e),d(r,i))}):function(e,i){var s,n,o;for(s=0;l>s;s++)if(o=a[s].field,n=u[s]*t(d(o,e),d(o,i)))return n;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=i({},t);var s=t.fields,n=t.sort,r=t.sort_empty;return s&&!o(s)&&(t.fields=[s]),n&&!o(n)&&(t.sort=[n]),r&&!o(r)&&(t.sort_empty=[r]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,s,n,o,r=this;return s=this.prepareSearch(e,t),t=s.options,e=s.query,o=t.score||r.getScoreFunction(s),e.length?r.iterator(r.items,function(e,n){i=o(e),(t.filter===!1||i>0)&&s.items.push({score:i,id:n})}):r.iterator(r.items,function(e,t){s.items.push({score:1,id:t})}),n=r.getSortFunction(s,t),n&&s.items.sort(n),s.total=s.items.length,"number"==typeof t.limit&&(s.items=s.items.slice(0,t.limit)),s};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=a(String(e||"")),t=a(String(t||"")),e>t?1:t>e?-1:0)},i=function(e,t){var i,s,n,o;for(i=1,s=arguments.length;s>i;i++)if(o=arguments[i])for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n]);return e},s=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},n=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r={a:"[aÀÁÂÃÄÅàáâãäåĀāąĄ]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒēęĘ]",i:"[iÌÍÎÏìíîïĪī]",l:"[lłŁ]",n:"[nÑñňŇńŃ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠšśŚ]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽžżŻźŹ]"},a=function(){var e,t,i,s,n="",o={};for(i in r)if(r.hasOwnProperty(i))for(s=r[i].substring(2,r[i].length-1),n+=s,e=0,t=s.length;t>e;e++)o[s.charAt(e)]=i;var a=new RegExp("["+n+"]","g");return function(e){return e.replace(a,function(e){return o[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,s,n,o=this,r=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,s=e.length;s>i;i++)"string"==typeof e[i]?r.push(e[i]):(o.plugins.settings[e[i].name]=e[i].options,r.push(e[i].name));else if(e)for(n in e)e.hasOwnProperty(n)&&(o.plugins.settings[n]=e[n],r.push(n));for(;r.length;)o.require(r.shift())},e.prototype.loadPlugin=function(t){var i=this,s=i.plugins,n=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');s.requested[t]=!0,s.loaded[t]=n.fn.apply(i,[i.plugins.settings[t]||{}]),s.names.push(t)},e.prototype.require=function(e){var t=this,i=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(i.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return i.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,i){"use strict";var s=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,s=function(e){var t=0;if(3===e.nodeType){var n=e.data.search(i);if(n>=0&&e.data.length>0){var o=e.data.match(i),r=document.createElement("span");r.className="highlight";var a=e.splitText(n),l=(a.splitText(o[0].length),a.cloneNode(!0));r.appendChild(l),a.parentNode.replaceChild(r,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=s(e.childNodes[c]);return t};return e.each(function(){s(this)})}},n=function(){};n.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},n.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=n.prototype[t[i]]};var o=/Mac/.test(navigator.userAgent),r=65,a=13,l=27,c=37,u=38,d=80,h=39,p=40,f=78,g=8,_=46,m=16,v=o?91:17,y=o?18:17,w=9,b=1,x=2,C=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,k=function(e){return"undefined"!=typeof e},S=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},O=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},$=function(e){return(e+"").replace(/\$/g,"$$$$")},I={};I.before=function(e,t,i){var s=e[t];e[t]=function(){return i.apply(e,arguments),s.apply(e,arguments)}},I.after=function(e,t,i){var s=e[t];e[t]=function(){var t=s.apply(e,arguments);return i.apply(e,arguments),t}};var T=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},A=function(e,t){var i;return function(){var s=this,n=arguments;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(s,n)},t)}},D=function(e,t,i){var s,n=e.trigger,o={};e.trigger=function(){var i=arguments[0];return-1===t.indexOf(i)?n.apply(e,arguments):void(o[i]=arguments)},i.apply(e,[]),e.trigger=n;for(s in o)o.hasOwnProperty(s)&&n.apply(e,o[s])},P=function(e,t,i,s){e.on(t,i,function(t){for(var i=t.target;i&&i.parentNode!==e[0];)i=i.parentNode;return t.currentTarget=i,s.apply(this,[t])})},q=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),s=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-s,t.length=s}return t},F=function(e,t,i){var s,n,o={};if(i)for(s=0,n=i.length;n>s;s++)o[i[s]]=e.css(i[s]);else o=e.css();t.css(o)},E=function(t,i){if(!t)return 0;var s=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");F(i,s,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var n=s.width();return s.remove(),n},j=function(e){var t=null,i=function(i,s){var n,o,r,a,l,c,u,d;i=i||window.event||{},s=s||{},i.metaKey||i.altKey||(s.force||e.data("grow")!==!1)&&(n=e.val(),i.type&&"keydown"===i.type.toLowerCase()&&(o=i.keyCode,r=o>=97&&122>=o||o>=65&&90>=o||o>=48&&57>=o||32===o,o===_||o===g?(d=q(e[0]),d.length?n=n.substring(0,d.start)+n.substring(d.start+d.length):o===g&&d.start?n=n.substring(0,d.start-1)+n.substring(d.start+1):o===_&&"undefined"!=typeof d.start&&(n=n.substring(0,d.start)+n.substring(d.start+1))):r&&(c=i.shiftKey,u=String.fromCharCode(i.keyCode),u=c?u.toUpperCase():u.toLowerCase(),n+=u)),a=e.attr("placeholder"),!n&&a&&(n=a),l=E(n,e)+4,l!==t&&(t=l,e.width(l),e.triggerHandler("resize")))};e.on("keydown keyup update blur",i),i()},M=function(i,s){var n,o,r,a,l=this;a=i[0],a.selectize=l;var c=window.getComputedStyle&&window.getComputedStyle(a,null);if(r=c?c.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction,r=r||i.parents("[dir]:first").attr("dir")||"",e.extend(l,{order:0,settings:s,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?b:x,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++M.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===s.loadThrottle?l.onSearchChange:A(l.onSearchChange,s.loadThrottle)}),l.sifter=new t(this.options,{diacritics:s.diacritics}),l.settings.options){for(n=0,o=l.settings.options.length;o>n;n++)l.registerOption(l.settings.options[n]);delete l.settings.options}if(l.settings.optgroups){for(n=0,o=l.settings.optgroups.length;o>n;n++)l.registerOptionGroup(l.settings.optgroups[n]);delete l.settings.optgroups}l.settings.mode=l.settings.mode||(1===l.settings.maxItems?"single":"multi"),"boolean"!=typeof l.settings.hideSelected&&(l.settings.hideSelected="multi"===l.settings.mode),l.initializePlugins(l.settings.plugins),l.setupCallbacks(),l.setupTemplates(),l.setup()};return n.mixin(M),i.mixin(M),e.extend(M.prototype,{setup:function(){var t,i,s,n,r,a,l,c,u,d=this,h=d.settings,p=d.eventNS,f=e(window),g=e(document),_=d.$input;if(l=d.settings.mode,c=_.attr("class")||"",t=e("<div>").addClass(h.wrapperClass).addClass(c).addClass(l),i=e("<div>").addClass(h.inputClass).addClass("items").appendTo(t),s=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",_.is(":disabled")?"-1":d.tabIndex),a=e(h.dropdownParent||t),n=e("<div>").addClass(h.dropdownClass).addClass(l).hide().appendTo(a),r=e("<div>").addClass(h.dropdownContentClass).appendTo(n),d.settings.copyClassesToDropdown&&n.addClass(c),t.css({width:_[0].style.width}),d.plugins.names.length&&(u="plugin-"+d.plugins.names.join(" plugin-"),t.addClass(u),n.addClass(u)),(null===h.maxItems||h.maxItems>1)&&d.tagType===b&&_.attr("multiple","multiple"),d.settings.placeholder&&s.attr("placeholder",h.placeholder),!d.settings.splitOn&&d.settings.delimiter){var w=d.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");d.settings.splitOn=new RegExp("\\s*"+w+"+\\s*")}_.attr("autocorrect")&&s.attr("autocorrect",_.attr("autocorrect")),_.attr("autocapitalize")&&s.attr("autocapitalize",_.attr("autocapitalize")),d.$wrapper=t,d.$control=i,d.$control_input=s,d.$dropdown=n,d.$dropdown_content=r,n.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),n.on("mousedown click","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),P(i,"mousedown","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),j(s),i.on({mousedown:function(){return d.onMouseDown.apply(d,arguments)},click:function(){return d.onClick.apply(d,arguments)}}),s.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keyup:function(){return d.onKeyUp.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.ignoreBlur=!1,d.onFocus.apply(d,arguments)},paste:function(){return d.onPaste.apply(d,arguments)}}),g.on("keydown"+p,function(e){d.isCmdDown=e[o?"metaKey":"ctrlKey"],d.isCtrlDown=e[o?"altKey":"ctrlKey"],d.isShiftDown=e.shiftKey}),g.on("keyup"+p,function(e){e.keyCode===y&&(d.isCtrlDown=!1),e.keyCode===m&&(d.isShiftDown=!1),e.keyCode===v&&(d.isCmdDown=!1)}),g.on("mousedown"+p,function(e){if(d.isFocused){if(e.target===d.$dropdown[0]||e.target.parentNode===d.$dropdown[0])return!1;d.$control.has(e.target).length||e.target===d.$control[0]||d.blur(e.target)}}),f.on(["scroll"+p,"resize"+p].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),f.on("mousemove"+p,function(){d.ignoreHover=!1}),this.revertSettings={$children:_.children().detach(),tabindex:_.attr("tabindex")},_.attr("tabindex",-1).hide().after(d.$wrapper),e.isArray(h.items)&&(d.setValue(h.items),delete h.items),C&&_.on("invalid"+p,function(e){e.preventDefault(),d.isInvalid=!0,d.refreshState()}),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.updatePlaceholder(),d.isSetup=!0,_.is(":disabled")&&d.disable(),d.on("change",this.onChange),_.data("selectize",d),_.addClass("selectized"),d.trigger("initialize"),h.preload===!0&&d.onSearchChange("")},setupTemplates:function(){var t=this,i=t.settings.labelField,s=t.settings.optgroupLabelField,n={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[s])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[i])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[i])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},n,t.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,s=t.isDefaultPrevented();e(t.target);if(i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():s||i.setActiveItem(null),!1}else s||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;i.isFull()||i.isInputHidden||i.isLocked?t.preventDefault():i.settings.splitOn&&setTimeout(function(){for(var t=e.trim(i.$control_input.val()||"").split(i.settings.splitOn),s=0,n=t.length;n>s;s++)i.createItem(t[s])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==w&&e.preventDefault());switch(e.keyCode){case r:if(t.isCmdDown)return void t.selectAll();break;case l:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case f:if(!e.ctrlKey||e.altKey)break;case p:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case d:if(!e.ctrlKey||e.altKey)break;case u:if(t.$activeOption){t.ignoreHover=!0;var s=t.getAdjacentOption(t.$activeOption,-1);s.length&&t.setActiveOption(s,!0,!0)}return void e.preventDefault();case a:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case c:return void t.advanceSelection(-1,e);case h:return void t.advanceSelection(1,e);case w:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case g:case _:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(o?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var i=t.$control_input.val()||"";t.lastValue!==i&&(t.lastValue=i,t.onSearchChange(i),t.refreshOptions(),t.trigger("type",i))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(s){i.apply(t,[e,s])})))},onFocus:function(e){var t=this,i=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),i||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var s=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),(t||document.body).focus(),i.ignoreFocus=!1,i.trigger("blur")};i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,s):s()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,s,n=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),s=e(t.currentTarget),s.hasClass("create")?n.createItem(null,function(){n.settings.closeAfterSelect&&n.close()}):(i=s.attr("data-value"),"undefined"!=typeof i&&(n.lastQuery=null,n.setTextboxValue(""),n.addItem(i),n.settings.closeAfterSelect?n.close():!n.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&n.setActiveOption(n.getOption(i))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,i=t.val()!==e;i&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===b&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var i=t?[]:["change"];D(this,i,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var s,n,o,r,a,l,c,u,d=this;if("single"!==d.settings.mode){if(t=e(t),!t.length)return e(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if(s=i&&i.type.toLowerCase(),"mousedown"===s&&d.isShiftDown&&d.$activeItems.length){for(u=d.$control.children(".active:last"),r=Array.prototype.indexOf.apply(d.$control[0].childNodes,[u[0]]),a=Array.prototype.indexOf.apply(d.$control[0].childNodes,[t[0]]),r>a&&(c=r,r=a,a=c),n=r;a>=n;n++)l=d.$control[0].childNodes[n],-1===d.$activeItems.indexOf(l)&&(e(l).addClass("active"),d.$activeItems.push(l));i.preventDefault()}else"mousedown"===s&&d.isCtrlDown||"keydown"===s&&this.isShiftDown?t.hasClass("active")?(o=d.$activeItems.indexOf(t[0]),d.$activeItems.splice(o,1),t.removeClass("active")):d.$activeItems.push(t.addClass("active")[0]):(e(d.$activeItems).removeClass("active"),d.$activeItems=[t.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(t,i,s){var n,o,r,a,l,c=this;c.$activeOption&&c.$activeOption.removeClass("active"),c.$activeOption=null,t=e(t),t.length&&(c.$activeOption=t.addClass("active"),(i||!k(i))&&(n=c.$dropdown_content.height(),o=c.$activeOption.outerHeight(!0),i=c.$dropdown_content.scrollTop()||0,r=c.$activeOption.offset().top-c.$dropdown_content.offset().top+i,a=r,l=r-n+o,r+o>n+i?c.$dropdown_content.stop().animate({scrollTop:l},s?c.settings.scrollDuration:0):i>r&&c.$dropdown_content.stop().animate({scrollTop:a},s?c.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var i,s,n,o=this,r=o.settings,a=this.getSearchOptions();if(r.score&&(n=o.settings.score.apply(this,[t]),"function"!=typeof n))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,s=o.sifter.search(t,e.extend(a,{score:n})),o.currentResults=s):s=e.extend(!0,{},o.currentResults),r.hideSelected)for(i=s.items.length-1;i>=0;i--)-1!==o.items.indexOf(S(s.items[i].id))&&s.items.splice(i,1);return s},refreshOptions:function(t){var i,n,o,r,a,l,c,u,d,h,p,f,g,_,m,v;"undefined"==typeof t&&(t=!0);var y=this,w=e.trim(y.$control_input.val()),b=y.search(w),x=y.$dropdown_content,C=y.$activeOption&&S(y.$activeOption.attr("data-value"));for(r=b.items.length,"number"==typeof y.settings.maxOptions&&(r=Math.min(r,y.settings.maxOptions)),a={},l=[],i=0;r>i;i++)for(c=y.options[b.items[i].id],u=y.render("option",c),d=c[y.settings.optgroupField]||"",h=e.isArray(d)?d:[d],n=0,o=h&&h.length;o>n;n++)d=h[n],y.optgroups.hasOwnProperty(d)||(d=""),a.hasOwnProperty(d)||(a[d]=[],l.push(d)),a[d].push(u);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){var i=y.optgroups[e].$order||0,s=y.optgroups[t].$order||0;return i-s}),p=[],i=0,r=l.length;r>i;i++)d=l[i],y.optgroups.hasOwnProperty(d)&&a[d].length?(f=y.render("optgroup_header",y.optgroups[d])||"",f+=a[d].join(""),p.push(y.render("optgroup",e.extend({},y.optgroups[d],{html:f})))):p.push(a[d].join(""));if(x.html(p.join("")),y.settings.highlight&&b.query.length&&b.tokens.length)for(i=0,r=b.tokens.length;r>i;i++)s(x,b.tokens[i].regex);if(!y.settings.hideSelected)for(i=0,r=y.items.length;r>i;i++)y.getOption(y.items[i]).addClass("selected");g=y.canCreate(w),g&&(x.prepend(y.render("option_create",{input:w})),v=e(x[0].childNodes[0])),y.hasOptions=b.items.length>0||g,y.hasOptions?(b.items.length>0?(m=C&&y.getOption(C),m&&m.length?_=m:"single"===y.settings.mode&&y.items.length&&(_=y.getOption(y.items[0])),_&&_.length||(_=v&&!y.settings.addPrecedence?y.getAdjacentOption(v,1):x.find("[data-selectable]:first"))):_=v,y.setActiveOption(_),t&&!y.isOpen&&y.open()):(y.setActiveOption(null),t&&y.isOpen&&y.close())},addOption:function(t){var i,s,n,o=this;if(e.isArray(t))for(i=0,s=t.length;s>i;i++)o.addOption(t[i]);else(n=o.registerOption(t))&&(o.userOptions[n]=!0,o.lastQuery=null,o.trigger("option_add",n,t))},registerOption:function(e){var t=S(e[this.settings.valueField]);return!t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=S(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var s,n,o,r,a,l,c,u=this;if(t=S(t),o=S(i[u.settings.valueField]),null!==t&&u.options.hasOwnProperty(t)){if("string"!=typeof o)throw new Error("Value must be set in option data");c=u.options[t].$order,o!==t&&(delete u.options[t],r=u.items.indexOf(t),-1!==r&&u.items.splice(r,1,o)),i.$order=i.$order||c,u.options[o]=i,a=u.renderCache.item,l=u.renderCache.option,a&&(delete a[t],delete a[o]),l&&(delete l[t],delete l[o]),-1!==u.items.indexOf(o)&&(s=u.getItem(t),n=e(u.render("item",i)),s.hasClass("active")&&n.addClass("active"),s.replaceWith(n)),u.lastQuery=null,u.isOpen&&u.refreshOptions(!1)}},removeOption:function(e,t){var i=this;e=S(e);var s=i.renderCache.item,n=i.renderCache.option;s&&delete s[e],n&&delete n[e],delete i.userOptions[e],delete i.options[e],i.lastQuery=null,i.trigger("option_remove",e),i.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var s=this.$dropdown.find("[data-selectable]"),n=s.index(t)+i;return n>=0&&n<s.length?s.eq(n):e()},getElementWithValue:function(t,i){if(t=S(t),"undefined"!=typeof t&&null!==t)for(var s=0,n=i.length;n>s;s++)if(i[s].getAttribute("data-value")===t)return e(i[s]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){for(var s=e.isArray(t)?t:[t],n=0,o=s.length;o>n;n++)this.isPending=o-1>n,this.addItem(s[n],i)},addItem:function(t,i){var s=i?[]:["change"];D(this,s,function(){var s,n,o,r,a,l=this,c=l.settings.mode;return t=S(t),-1!==l.items.indexOf(t)?void("single"===c&&l.close()):void(l.options.hasOwnProperty(t)&&("single"===c&&l.clear(i),"multi"===c&&l.isFull()||(s=e(l.render("item",l.options[t])),a=l.isFull(),l.items.splice(l.caretPos,0,t),l.insertAtCaret(s),(!l.isPending||!a&&l.isFull())&&l.refreshState(),l.isSetup&&(o=l.$dropdown_content.find("[data-selectable]"),l.isPending||(n=l.getOption(t),r=l.getAdjacentOption(n,1).attr("data-value"),l.refreshOptions(l.isFocused&&"single"!==c),r&&l.setActiveOption(l.getOption(r))),!o.length||l.isFull()?l.close():l.positionDropdown(),l.updatePlaceholder(),l.trigger("item_add",t,s),l.updateOriginalInput({silent:i})))))})},removeItem:function(e,t){var i,s,n,o=this;i="object"==typeof e?e:o.getItem(e),e=S(i.attr("data-value")),s=o.items.indexOf(e),-1!==s&&(i.remove(),i.hasClass("active")&&(n=o.$activeItems.indexOf(i[0]),o.$activeItems.splice(n,1)),o.items.splice(s,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(e)&&o.removeOption(e,t),s<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:t}),o.positionDropdown(),o.trigger("item_remove",e,i))},createItem:function(t,i){var s=this,n=s.caretPos;t=t||e.trim(s.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof i&&(i=!0),!s.canCreate(t))return o(),!1;s.lock();var r="function"==typeof s.settings.create?this.settings.create:function(e){var t={};return t[s.settings.labelField]=e,t[s.settings.valueField]=e,t},a=T(function(e){if(s.unlock(),!e||"object"!=typeof e)return o();var t=S(e[s.settings.valueField]);return"string"!=typeof t?o():(s.setTextboxValue(""),s.addOption(e),s.setCaret(n),s.addItem(t),s.refreshOptions(i&&"single"!==s.settings.mode),void o(e))}),l=r.apply(this,[t,a]);return"undefined"!=typeof l&&a(l),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,i=t.isFull(),s=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",s).toggleClass("full",i).toggleClass("not-full",!i).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!i&&!s)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,s,n,o=this;if(e=e||{},o.tagType===b){for(s=[],t=0,i=o.items.length;i>t;t++)n=o.options[o.items[t]][o.settings.labelField]||"",s.push('<option value="'+O(o.items[t])+'" selected="selected">'+O(n)+"</option>");s.length||this.$input.attr("multiple")||s.push('<option value="" selected="selected"></option>'),o.$input.html(s.join(""))}else o.$input.val(o.getValue()),o.$input.attr("value",o.$input.val());o.isSetup&&(e.silent||o.trigger("change",o.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var i=Math.min(this.caretPos,this.items.length);0===i?this.$control.prepend(t):e(this.$control[0].childNodes[i]).before(t),this.setCaret(i+1)},deleteSelection:function(t){var i,s,n,o,r,a,l,c,u,d=this;if(n=t&&t.keyCode===g?-1:1,o=q(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(l=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),r=[],d.$activeItems.length){for(u=d.$control.children(".active:"+(n>0?"last":"first")),
a=d.$control.children(":not(input)").index(u),n>0&&a++,i=0,s=d.$activeItems.length;s>i;i++)r.push(e(d.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(0>n&&0===o.start&&0===o.length?r.push(d.items[d.caretPos-1]):n>0&&o.start===d.$control_input.val().length&&r.push(d.items[d.caretPos]));if(!r.length||"function"==typeof d.settings.onDelete&&d.settings.onDelete.apply(d,[r])===!1)return!1;for("undefined"!=typeof a&&d.setCaret(a);r.length;)d.removeItem(r.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),l&&(c=d.getOption(l),c.length&&d.setActiveOption(c)),!0},advanceSelection:function(e,t){var i,s,n,o,r,a,l=this;0!==e&&(l.rtl&&(e*=-1),i=e>0?"last":"first",s=q(l.$control_input[0]),l.isFocused&&!l.isInputHidden?(o=l.$control_input.val().length,r=0>e?0===s.start&&0===s.length:s.start===o,r&&!o&&l.advanceCaret(e,t)):(a=l.$control.children(".active:"+i),a.length&&(n=l.$control.children(":not(input)").index(a),l.setActiveItem(null),l.setCaret(e>0?n+1:n))))},advanceCaret:function(e,t){var i,s,n=this;0!==e&&(i=e>0?"next":"prev",n.isShiftDown?(s=n.$control_input[i](),s.length&&(n.hideInput(),n.setActiveItem(s),t&&t.preventDefault())):n.setCaret(n.caretPos+e))},setCaret:function(t){var i=this;if(t="single"===i.settings.mode?i.items.length:Math.max(0,Math.min(i.items.length,t)),!i.isPending){var s,n,o,r;for(o=i.$control.children(":not(input)"),s=0,n=o.length;n>s;s++)r=e(o[s]).detach(),t>s?i.$control_input.before(r):i.$control.append(r)}i.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,i=t.eventNS,s=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(s.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:s.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(i),e(document).off(i),e(document.body).off(i),delete t.$input[0].selectize},render:function(e,t){var i,s,n="",o=!1,r=this,a=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(i=S(t[r.settings.valueField]),o=!!i),o&&(k(r.renderCache[e])||(r.renderCache[e]={}),r.renderCache[e].hasOwnProperty(i))?r.renderCache[e][i]:(n=r.settings.render[e].apply(this,[t,O]),("option"===e||"option_create"===e)&&(n=n.replace(a,"<$1 data-selectable")),"optgroup"===e&&(s=t[r.settings.optgroupValueField]||"",n=n.replace(a,'<$1 data-group="'+$(O(s))+'"')),("option"===e||"item"===e)&&(n=n.replace(a,'<$1 data-value="'+$(O(i||""))+'"')),o&&(r.renderCache[e][i]=n),n)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var i=t.settings.createFilter;return e.length&&("function"!=typeof i||i.apply(t,[e]))&&("string"!=typeof i||new RegExp(i).test(e))&&(!(i instanceof RegExp)||i.test(e))}}),M.count=0,M.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,s=e.extend({},i,t),n=s.dataAttr,o=s.labelField,r=s.valueField,a=s.optgroupField,l=s.optgroupLabelField,c=s.optgroupValueField,u=function(t,i){var a,l,c,u,d=t.attr(n);if(d)for(i.options=JSON.parse(d),a=0,l=i.options.length;l>a;a++)i.items.push(i.options[a][r]);else{var h=e.trim(t.val()||"");if(!s.allowEmptyOption&&!h.length)return;for(c=h.split(s.delimiter),a=0,l=c.length;l>a;a++)u={},u[o]=c[a],u[r]=c[a],i.options.push(u);i.items=c}},d=function(t,i){var u,d,h,p,f=i.options,g={},_=function(e){var t=n&&e.attr(n);return"string"==typeof t&&t.length?JSON.parse(t):null},m=function(t,n){t=e(t);var l=S(t.attr("value"));if(l||s.allowEmptyOption)if(g.hasOwnProperty(l)){if(n){var c=g[l][a];c?e.isArray(c)?c.push(n):g[l][a]=[c,n]:g[l][a]=n}}else{var u=_(t)||{};u[o]=u[o]||t.text(),u[r]=u[r]||l,u[a]=u[a]||n,g[l]=u,f.push(u),t.is(":selected")&&i.items.push(l)}},v=function(t){var s,n,o,r,a;for(t=e(t),o=t.attr("label"),o&&(r=_(t)||{},r[l]=o,r[c]=o,i.optgroups.push(r)),a=e("option",t),s=0,n=a.length;n>s;s++)m(a[s],o)};for(i.maxItems=t.attr("multiple")?null:1,p=t.children(),u=0,d=p.length;d>u;u++)h=p[u].tagName.toLowerCase(),"optgroup"===h?v(p[u]):"option"===h&&m(p[u])};return this.each(function(){if(!this.selectize){var n,o=e(this),r=this.tagName.toLowerCase(),a=o.attr("placeholder")||o.attr("data-placeholder");a||s.allowEmptyOption||(a=o.children('option[value=""]').text());var l={placeholder:a,options:[],optgroups:[],items:[]};"select"===r?d(o,l):u(o,l),n=new M(o,e.extend(!0,{},i,l,t))}})},e.fn.selectize.defaults=M.defaults,e.fn.selectize.support={validity:C},M.define("drag_drop",function(t){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var i=this;i.lock=function(){var e=i.lock;return function(){var t=i.$control.data("sortable");return t&&t.disable(),e.apply(i,arguments)}}(),i.unlock=function(){var e=i.unlock;return function(){var t=i.$control.data("sortable");return t&&t.enable(),e.apply(i,arguments)}}(),i.setup=function(){var t=i.setup;return function(){t.apply(this,arguments);var s=i.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:i.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),s.css({overflow:"visible"})},stop:function(){s.css({overflow:"hidden"});var t=i.$activeItems?i.$activeItems.slice():null,n=[];s.children("[data-value]").each(function(){n.push(e(this).attr("data-value"))}),i.setValue(n),i.setActiveItem(t)}})}}()}}),M.define("dropdown_header",function(t){var i=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),i.setup=function(){var s=i.setup;return function(){s.apply(i,arguments),i.$dropdown_header=e(t.html(t)),i.$dropdown.prepend(i.$dropdown_header)}}()}),M.define("optgroup_columns",function(t){var i=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var s=t.closest("[data-group]").find("[data-selectable]"),n=s.index(t)+i;return n>=0&&n<s.length?s.eq(n):e()},this.onKeyDown=function(){var e=i.onKeyDown;return function(t){var s,n,o,r;return!this.isOpen||t.keyCode!==c&&t.keyCode!==h?e.apply(this,arguments):(i.ignoreHover=!0,r=this.$activeOption.closest("[data-group]"),s=r.find("[data-selectable]").index(this.$activeOption),r=t.keyCode===c?r.prev("[data-group]"):r.next("[data-group]"),o=r.find("[data-selectable]"),n=o.eq(Math.min(o.length-1,s)),void(n.length&&this.setActiveOption(n)))}}();var s=function(){var e,t=s.width,i=document;return"undefined"==typeof t&&(e=i.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=s.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},n=function(){var n,o,r,a,l,c,u;if(u=e("[data-group]",i.$dropdown_content),o=u.length,o&&i.$dropdown_content.width()){if(t.equalizeHeight){for(r=0,n=0;o>n;n++)r=Math.max(r,u.eq(n).height());u.css({height:r})}t.equalizeWidth&&(c=i.$dropdown_content.innerWidth()-s(),a=Math.round(c/o),u.css({width:a}),o>1&&(l=c-a*(o-1),u.eq(o-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(I.after(this,"positionDropdown",n),I.after(this,"refreshOptions",n))}),M.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var i=this,s='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+O(t.title)+'">'+t.label+"</a>",n=function(e,t){var i=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,i)+t+e.substring(i)};this.setup=function(){var o=i.setup;return function(){if(t.append){var r=i.settings.render.item;i.settings.render.item=function(e){return n(r.apply(this,arguments),s)}}o.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!i.isLocked){var s=e(t.currentTarget).parent();i.setActiveItem(s),i.deleteSelection()&&i.setCaret(i.items.length)}})}}()}}),M.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var i=t.onKeyDown;return function(t){var s,n;return t.keyCode===g&&""===this.$control_input.val()&&!this.$activeItems.length&&(s=this.caretPos-1,s>=0&&s<this.items.length)?(n=this.options[this.items[s]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[n])),this.refreshOptions(!0)),void t.preventDefault()):i.apply(this,arguments)}}()}),M}),function(){var e,t,i,s,n,o={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var s in t)o.call(t,s)&&(e[s]=t[s]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};s=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,s,n,o,r;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),title:e.title?e.title:void 0,children:0,disabled:e.disabled,classes:e.className}),o=e.childNodes,r=[],s=0,n=o.length;n>s;s++)i=o[s],r.push(this.add_option(i,t,e.disabled));return r},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,title:e.title?e.title:void 0,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,group_label:null!=t?this.parsed[t].label:null,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,i;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(i,function(e){return t[e]||"&amp;"})):e},e}(),s.select_to_array=function(e){var t,i,n,o,r;for(i=new s,r=e.childNodes,n=0,o=r.length;o>n;n++)t=r[n],i.add_node(t);return i.parsed},t=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.choice_label=function(e){return this.include_group_label_in_selected&&null!=e.group_label?"<b class='group-name'>"+e.group_label+"</b>"+e.html:e.html},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,i,s,n,o;for(t="",o=this.results_data,s=0,n=o.length;n>s;s++)i=o[s],t+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=e?e.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(i)));return t},e.prototype.result_add_option=function(e){var t,i;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=document.createElement("li"),i.className=t.join(" "),i.style.cssText=e.style,i.setAttribute("data-option-array-index",e.array_index),i.innerHTML=e.search_text,e.title&&(i.title=e.title),this.outerHTML(i)):""},e.prototype.result_add_group=function(e){var t,i;return(e.search_match||e.group_match)&&e.active_options>0?(t=[],t.push("group-result"),e.classes&&t.push(e.classes),i=document.createElement("li"),i.className=t.join(" "),i.innerHTML=e.search_text,e.title&&(i.title=e.title),this.outerHTML(i)):""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,i,s,n;for(s=this.results_data,n=[],t=0,i=s.length;i>t;t++)e=s[t],n.push(e.selected?e.selected=!1:void 0);return n},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,i,s,n,o,r,a,l,c,u,d;for(this.no_results_clear(),s=0,o=this.get_search_text(),e=o.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(e,"i"),i=this.get_search_regex(e),d=this.results_data,c=0,u=d.length;u>c;c++)t=d[c],t.search_match=!1,n=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(n=this.results_data[t.group_array_index],0===n.active_options&&n.search_match&&(s+=1),n.active_options+=1),t.search_text=t.group?t.label:t.html,(!t.group||this.group_search)&&(t.search_match=this.search_string_match(t.search_text,i),t.search_match&&!t.group&&(s+=1),t.search_match?(o.length&&(r=t.search_text.search(l),a=t.search_text.substr(0,r+o.length)+"</em>"+t.search_text.substr(r+o.length),t.search_text=a.substr(0,r)+"<em>"+a.substr(r)),null!=n&&(n.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>s&&o.length?(this.update_results_content(""),this.no_results(o)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.get_search_regex=function(e){var t;return t=this.search_contains?"":"^",new RegExp(t+e,"i")},e.prototype.search_string_match=function(e,t){var i,s,n,o;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(s=e.replace(/\[|\]/g,"").split(" "),s.length))for(n=0,o=s.length;o>n;n++)if(i=s[n],t.test(i))return!0},e.prototype.choices_count=function(){var e,t,i,s;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,s=this.form_field.options,t=0,i=s.length;i>t;t++)e=s[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(s){return t.browser_is_supported()?this.each(function(){var t,n;t=e(this),n=t.data("chosen"),"destroy"===s&&n instanceof i?n.destroy():n instanceof i||t.data("chosen",new i(this,s))}):this}}),i=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var t,i;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",i),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},i.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.bind("touchstart.chosen",function(t){return e.container_mousedown(t),t.preventDefault()}),this.container.bind("touchend.chosen",function(t){return e.container_mouseup(t),t.preventDefault()}),this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},i.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},i.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=e.originalEvent.deltaY||-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){var i;return i=e(t.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=s.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(e){var t,i,s,n,o;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),s=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),n=s+o,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=n)return this.search_results.scrollTop(t-s>0?t-s:0);if(o>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(e){return this.search_results.html(e)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},i.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(t){var i,s,n=this;return i=e("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(t)+"</span>"),t.disabled?i.addClass("search-choice-disabled"):(s=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),s.bind("click.chosen",function(e){return n.choice_destroy_link_click(e)}),i.append(s)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},i.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,
this.selected_item.find("abbr").remove()},i.prototype.result_select=function(e){var t,i;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),t.addClass("result-selected"),i=this.results_data[t[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(this.choice_label(i)),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,e.preventDefault(),this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(e)},i.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return e("<div/>").text(e.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},i.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:this.results_showing&&e.preventDefault();break;case 32:this.disable_search&&e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,i,s,n,o,r,a,l,c;if(this.is_multiple){for(s=0,a=0,o="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=r.length;c>l;l++)n=r[l],o+=n+":"+this.search_field.css(n)+";";return t=e("<div />",{style:o}),t.text(this.search_field.val()),e("body").append(t),a=t.width()+25,t.remove(),i=this.container.outerWidth(),a>i-10&&(a=i-10),this.search_field.css({width:a+"px"})}},i}(t)}.call(this),!function(e,t,i){"use strict";!function s(e,t,i){function n(r,a){if(!t[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return n(i?i:t)},u,u.exports,s,e,t,i)}return t[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(s){var n,o,r,a,l=function(e){return e&&e.__esModule?e:{"default":e}},c=s("./modules/handle-dom"),u=s("./modules/utils"),d=s("./modules/handle-swal-dom"),h=s("./modules/handle-click"),p=s("./modules/handle-key"),f=l(p),g=s("./modules/default-params"),_=l(g),m=s("./modules/set-params"),v=l(m);r=a=function(){function s(e){var t=r;return t[e]===i?_["default"][e]:t[e]}var r=arguments[0];if(c.addClass(t.body,"stop-scrolling"),d.resetInput(),r===i)return u.logStr("SweetAlert expects at least 1 attribute!"),!1;var a=u.extend({},_["default"]);switch(typeof r){case"string":a.title=r,a.text=arguments[1]||"",a.type=arguments[2]||"";break;case"object":if(r.title===i)return u.logStr('Missing "title" argument!'),!1;a.title=r.title;for(var l in _["default"])a[l]=s(l);a.confirmButtonText=a.showCancelButton?"Confirm":_["default"].confirmButtonText,a.confirmButtonText=s("confirmButtonText"),a.doneFunction=arguments[1]||null;break;default:return u.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof r),!1}v["default"](a),d.fixVerticalPosition(),d.openModal(arguments[1]);for(var p=d.getModal(),g=p.querySelectorAll("button"),m=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],y=function(e){return h.handleButton(e,a,p)},w=0;w<g.length;w++)for(var b=0;b<m.length;b++){var x=m[b];g[w][x]=y}d.getOverlay().onclick=y,n=e.onkeydown;var C=function(e){return f["default"](e,a,p)};e.onkeydown=C,e.onfocus=function(){setTimeout(function(){o!==i&&(o.focus(),o=i)},0)}},r.setDefaults=a.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");u.extend(_["default"],e)},r.close=a.close=function(){var s=d.getModal();c.fadeOut(d.getOverlay(),5),c.fadeOut(s,5),c.removeClass(s,"showSweetAlert"),c.addClass(s,"hideSweetAlert"),c.removeClass(s,"visible");var r=s.querySelector(".sa-icon.sa-success");c.removeClass(r,"animate"),c.removeClass(r.querySelector(".sa-tip"),"animateSuccessTip"),c.removeClass(r.querySelector(".sa-long"),"animateSuccessLong");var a=s.querySelector(".sa-icon.sa-error");c.removeClass(a,"animateErrorIcon"),c.removeClass(a.querySelector(".sa-x-mark"),"animateXMark");var l=s.querySelector(".sa-icon.sa-warning");return c.removeClass(l,"pulseWarning"),c.removeClass(l.querySelector(".sa-body"),"pulseWarningIns"),c.removeClass(l.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=s.getAttribute("data-custom-class");c.removeClass(s,e)},300),c.removeClass(t.body,"stop-scrolling"),e.onkeydown=n,e.previousActiveElement&&e.previousActiveElement.focus(),o=i,clearTimeout(s.timeout),!0},r.showInputError=a.showInputError=function(e){var t=d.getModal(),i=t.querySelector(".sa-input-error");c.addClass(i,"show");var s=t.querySelector(".sa-error-container");c.addClass(s,"show"),s.querySelector("p").innerHTML=e,t.querySelector("input").focus()},r.resetInputError=a.resetInputError=function(e){if(e&&13===e.keyCode)return!1;var t=d.getModal(),i=t.querySelector(".sa-input-error");c.removeClass(i,"show");var s=t.querySelector(".sa-error-container");c.removeClass(s,"show")},"undefined"!=typeof e?e.sweetAlert=e.swal=r:u.logStr("SweetAlert is a frontend module!")},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var s={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:""};i["default"]=s,t.exports=i["default"]},{}],3:[function(t,i,s){Object.defineProperty(s,"__esModule",{value:!0});var n=t("./utils"),o=(t("./handle-swal-dom"),t("./handle-dom")),r=function(t,i,s){function r(e){f&&i.confirmButtonColor&&(p.style.backgroundColor=e)}var c,u,d,h=t||e.event,p=h.target||h.srcElement,f=-1!==p.className.indexOf("confirm"),g=-1!==p.className.indexOf("sweet-overlay"),_=o.hasClass(s,"visible"),m=i.doneFunction&&"true"===s.getAttribute("data-has-done-function");switch(f&&i.confirmButtonColor&&(c=i.confirmButtonColor,u=n.colorLuminance(c,-.04),d=n.colorLuminance(c,-.14)),h.type){case"mouseover":r(u);break;case"mouseout":r(c);break;case"mousedown":r(d);break;case"mouseup":r(u);break;case"focus":var v=s.querySelector("button.confirm"),y=s.querySelector("button.cancel");f?y.style.boxShadow="none":v.style.boxShadow="none";break;case"click":var w=s===p,b=o.isDescendant(s,p);if(!w&&!b&&_&&!i.allowOutsideClick)break;f&&m&&_?a(s,i):m&&_||g?l(s,i):o.isDescendant(s,p)&&"BUTTON"===p.tagName&&sweetAlert.close()}},a=function(e,t){var i=!0;o.hasClass(e,"show-input")&&(i=e.querySelector("input").value,i||(i="")),t.doneFunction(i),t.closeOnConfirm&&sweetAlert.close()},l=function(e,t){var i=String(t.doneFunction).replace(/\s/g,""),s="function("===i.substring(0,9)&&")"!==i.substring(9,10);s&&t.doneFunction(!1),t.closeOnCancel&&sweetAlert.close()};s["default"]={handleButton:r,handleConfirm:a,handleCancel:l},i.exports=s["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(i,s,n){Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},r=function(e,t){o(e,t)||(e.className+=" "+t)},a=function(e,t){var i=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(o(e,t)){for(;i.indexOf(" "+t+" ")>=0;)i=i.replace(" "+t+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}},l=function(e){var i=t.createElement("div");return i.appendChild(t.createTextNode(e)),i.innerHTML},c=function(e){e.style.opacity="",e.style.display="block"},u=function(e){if(e&&!e.length)return c(e);for(var t=0;t<e.length;++t)c(e[t])},d=function(e){e.style.opacity="",e.style.display="none"},h=function(e){if(e&&!e.length)return d(e);for(var t=0;t<e.length;++t)d(e[t])},p=function(e,t){for(var i=t.parentNode;null!==i;){if(i===e)return!0;i=i.parentNode}return!1},f=function(e){e.style.left="-9999px",e.style.display="block";var t,i=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt((i+t)/2)+"px"},g=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var i=+new Date,s=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity+(new Date-i)/100,i=+new Date,+e.style.opacity<1&&setTimeout(s,t)});s()}e.style.display="block"},_=function(e,t){t=t||16,e.style.opacity=1;var i=+new Date,s=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity-(new Date-i)/100,i=+new Date,+e.style.opacity>0?setTimeout(s,t):e.style.display="none"});s()},m=function(i){if("function"==typeof MouseEvent){var s=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});i.dispatchEvent(s)}else if(t.createEvent){var n=t.createEvent("MouseEvents");n.initEvent("click",!1,!1),i.dispatchEvent(n)}else t.createEventObject?i.fireEvent("onclick"):"function"==typeof i.onclick&&i.onclick()},v=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)};n.hasClass=o,n.addClass=r,n.removeClass=a,n.escapeHtml=l,n._show=c,n.show=u,n._hide=d,n.hide=h,n.isDescendant=p,n.getTopMargin=f,n.fadeIn=g,n.fadeOut=_,n.fireClick=m,n.stopEventPropagation=v},{}],5:[function(t,s,n){Object.defineProperty(n,"__esModule",{value:!0});var o=t("./handle-dom"),r=t("./handle-swal-dom"),a=function(t,s,n){var a=t||e.event,l=a.keyCode||a.which,c=n.querySelector("button.confirm"),u=n.querySelector("button.cancel"),d=n.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(l)){for(var h=a.target||a.srcElement,p=-1,f=0;f<d.length;f++)if(h===d[f]){p=f;break}9===l?(h=-1===p?c:p===d.length-1?d[0]:d[p+1],o.stopEventPropagation(a),h.focus(),s.confirmButtonColor&&r.setFocusStyle(h,s.confirmButtonColor)):13===l?("INPUT"===h.tagName&&(h=c,c.focus()),h=-1===p?c:i):27===l&&s.allowEscapeKey===!0?(h=u,o.fireClick(h,a)):h=i}};n["default"]=a,s.exports=n["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(i,s,n){var o=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(n,"__esModule",{value:!0});var r=i("./utils"),a=i("./handle-dom"),l=i("./default-params"),c=o(l),u=i("./injected-html"),d=o(u),h=".sweet-alert",p=".sweet-overlay",f=function(){var e=t.createElement("div");for(e.innerHTML=d["default"];e.firstChild;)t.body.appendChild(e.firstChild)},g=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=t.querySelector(h);return e||(f(),e=g()),e}),_=function(){var e=g();return e?e.querySelector("input"):void 0},m=function(){return t.querySelector(p)},v=function(e,t){var i=r.hexToRgb(t);e.style.boxShadow="0 0 2px rgba("+i+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},y=function(i){var s=g();a.fadeIn(m(),10),a.show(s),a.addClass(s,"showSweetAlert"),a.removeClass(s,"hideSweetAlert"),e.previousActiveElement=t.activeElement;var n=s.querySelector("button.confirm");n.focus(),setTimeout(function(){a.addClass(s,"visible")},500);var o=s.getAttribute("data-timer");if("null"!==o&&""!==o){var r=i;s.timeout=setTimeout(function(){var e=(r||null)&&"true"===s.getAttribute("data-has-done-function");e?r(null):sweetAlert.close()},o)}},w=function(){var e=g(),t=_();a.removeClass(e,"show-input"),t.value=c["default"].inputValue,t.setAttribute("type",c["default"].inputType),t.setAttribute("placeholder",c["default"].inputPlaceholder),b()},b=function(e){if(e&&13===e.keyCode)return!1;var t=g(),i=t.querySelector(".sa-input-error");a.removeClass(i,"show");var s=t.querySelector(".sa-error-container");a.removeClass(s,"show")},x=function(){var e=g();e.style.marginTop=a.getTopMargin(g())};n.sweetAlertInitialize=f,n.getModal=g,n.getOverlay=m,n.getInput=_,n.setFocusStyle=v,n.openModal=y,n.resetInput=w,n.resetInputError=b,n.fixVerticalPosition=x},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var s='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <button class="confirm" tabIndex="1">OK</button>\n    </div></div>';i["default"]=s,t.exports=i["default"]},{}],8:[function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var n=e("./utils"),o=e("./handle-swal-dom"),r=e("./handle-dom"),a=["error","warning","info","success","input","prompt"],l=function(e){var t=o.getModal(),s=t.querySelector("h2"),l=t.querySelector("p"),c=t.querySelector("button.cancel"),u=t.querySelector("button.confirm");if(s.innerHTML=e.html?e.title:r.escapeHtml(e.title).split("\n").join("<br>"),l.innerHTML=e.html?e.text:r.escapeHtml(e.text||"").split("\n").join("<br>"),e.text&&r.show(l),e.customClass)r.addClass(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var d=t.getAttribute("data-custom-class");r.removeClass(t,d),t.setAttribute("data-custom-class","")}if(r.hide(t.querySelectorAll(".sa-icon")),e.type&&!n.isIE8()){var h=function(){for(var s=!1,n=0;n<a.length;n++)if(e.type===a[n]){s=!0;break}if(!s)return logStr("Unknown alert type: "+e.type),{v:!1};var l=["success","error","warning","info"],c=i;-1!==l.indexOf(e.type)&&(c=t.querySelector(".sa-icon.sa-"+e.type),r.show(c));var u=o.getInput();switch(e.type){case"success":r.addClass(c,"animate"),r.addClass(c.querySelector(".sa-tip"),"animateSuccessTip"),r.addClass(c.querySelector(".sa-long"),"animateSuccessLong");break;case"error":r.addClass(c,"animateErrorIcon"),r.addClass(c.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":r.addClass(c,"pulseWarning"),r.addClass(c.querySelector(".sa-body"),"pulseWarningIns"),r.addClass(c.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":u.setAttribute("type",e.inputType),u.value=e.inputValue,u.setAttribute("placeholder",e.inputPlaceholder),r.addClass(t,"show-input"),setTimeout(function(){u.focus(),u.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof h)return h.v}if(e.imageUrl){var p=t.querySelector(".sa-icon.sa-custom");p.style.backgroundImage="url("+e.imageUrl+")",r.show(p);var f=80,g=80;if(e.imageSize){var _=e.imageSize.toString().split("x"),m=_[0],v=_[1];m&&v?(f=m,g=v):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}p.setAttribute("style",p.getAttribute("style")+"width:"+f+"px; height:"+g+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?c.style.display="inline-block":r.hide(c),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?u.style.display="inline-block":r.hide(u),e.cancelButtonText&&(c.innerHTML=r.escapeHtml(e.cancelButtonText)),e.confirmButtonText&&(u.innerHTML=r.escapeHtml(e.confirmButtonText)),e.confirmButtonColor&&(u.style.backgroundColor=e.confirmButtonColor,o.setFocusStyle(u,e.confirmButtonColor)),t.setAttribute("data-allow-outside-click",e.allowOutsideClick);var y=e.doneFunction?!0:!1;t.setAttribute("data-has-done-function",y),e.animation?"string"==typeof e.animation?t.setAttribute("data-animation",e.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)};s["default"]=l,t.exports=s["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,i,s){Object.defineProperty(s,"__esModule",{value:!0});var n=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},o=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},r=function(){return e.attachEvent&&!e.addEventListener},a=function(t){e.console&&e.console.log("SweetAlert: "+t)},l=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var i,s,n="#";for(s=0;3>s;s++)i=parseInt(e.substr(2*s,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),n+=("00"+i).substr(i.length);return n};s.extend=n,s.hexToRgb=o,s.isIE8=r,s.logStr=a,s.colorLuminance=l},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document);var textShare={compartilhe:"Compartilhe esta seleção",facebook:"Compartilhe esta seleção no Facebook",twitter:"Compartilhe esta seleção no Twitter",email:"Compartilhe esta seleção no Email",trecho:"Trecho de "};!function(e){var t=function(t){var i=this;t=t||{},"string"==typeof t&&(t={elements:t}),this.sel=null,this.textSelection="",this.htmlSelection="",this.appId=e('meta[property="fb:app_id"]').attr("content")||e('meta[property="fb:app_id"]').attr("value"),this.url2share=e('meta[property="og:url"]').attr("content")||e('meta[property="og:url"]').attr("value")||window.location.href,this.getSelectionText=function(e){var t="",s="",e=e||window.getSelection();if(e.rangeCount){for(var n=document.createElement("div"),o=0,r=e.rangeCount;r>o;++o)n.appendChild(e.getRangeAt(o).cloneContents());s=n.textContent,t=n.innerHTML}return i.textSelection=s,i.htmlSelection=t||s,s},this.selectionDirection=function(e){var t=e||window.getSelection(),i=document.createRange();if(!t.anchorNode)return 0;i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset);var s=i.collapsed?"backward":"forward";return i.detach(),s},this.showPopunder=function(){i.popunder=i.popunder||document.getElementById("selectionSharerPopunder");var e=window.getSelection(),t=i.getSelectionText(e);if(e.isCollapsed||t.length<10||!t.match(/ /))return i.hidePopunder();if(i.popunder.classList.contains("fixed"))return i.popunder.style.bottom=0;var s=e.getRangeAt(0),n=s.endContainer.parentNode;if(i.popunder.classList.contains("show")){if(Math.ceil(i.popunder.getBoundingClientRect().top)==Math.ceil(n.getBoundingClientRect().bottom))return;return i.hidePopunder(i.showPopunder)}if(n.nextElementSibling)i.pushSiblings(n);else{i.placeholder||(i.placeholder=document.createElement("div"),i.placeholder.className="selectionSharerPlaceholder");var o=window.getComputedStyle(n).marginBottom;i.placeholder.style.height=o,i.placeholder.style.marginBottom=-2*parseInt(o,10)+"px",n.parentNode.insertBefore(i.placeholder)}var r=window.pageYOffset+n.getBoundingClientRect().bottom;i.popunder.style.top=Math.ceil(r)+"px",setTimeout(function(){i.placeholder&&i.placeholder.classList.add("show"),i.popunder.classList.add("show")},0)},this.pushSiblings=function(e){for(;e=e.nextElementSibling;)e.classList.add("selectionSharer"),e.classList.add("moveDown")},this.hidePopunder=function(e){if(e=e||function(){},"fixed"==i.popunder)return i.popunder.style.bottom="-50px",e();i.popunder.classList.remove("show"),i.placeholder&&i.placeholder.classList.remove("show");for(var t=document.getElementsByClassName("moveDown");el=t[0];)el.classList.remove("moveDown");setTimeout(function(){i.placeholder&&document.body.insertBefore(i.placeholder),e()},600)},this.show=function(e){setTimeout(function(){var t=window.getSelection(),s=i.getSelectionText(t);if(!t.isCollapsed&&s&&s.length>10&&s.match(/ /)){var n=t.getRangeAt(0),o=n.getBoundingClientRect().top-5,r=o+window.scrollY-i.$popover.height(),a=0;if(e)a=e.pageX;else{var l=t.anchorNode.parentNode;a+=l.offsetWidth/2;do a+=l.offsetLeft;while(l=l.offsetParent)}switch(i.selectionDirection(t)){case"forward":a-=i.$popover.width();break;case"backward":a+=i.$popover.width();break;default:return}i.$popover.removeClass("anim").css("top",r+10).css("left",a).show(),setTimeout(function(){i.$popover.addClass("anim").css("top",r)},0)}},10)},this.hide=function(e){i.$popover.hide()},this.smart_truncate=function(e,t){if(!e||!e.length)return e;var i=e.length>t,s=i?e.substr(0,t-1):e;return s=i?s.substr(0,s.lastIndexOf(" ")):s,i?s+"...":s},this.getRelatedTwitterAccounts=function(){var t=[],i=e('meta[name="twitter:creator"]').attr("content")||e('meta[name="twitter:creator"]').attr("value");i&&t.push(i);for(var s=document.getElementsByTagName("a"),n=0,o=s.length;o>n;n++)if(s[n].attributes.href&&"string"==typeof s[n].attributes.href.value){var r=s[n].attributes.href.value.match(/^https?:\/\/twitter\.com\/([a-z0-9_]{1,20})/i);r&&r.length>1&&-1==["widgets","intent"].indexOf(r[1])&&t.push(r[1])}return t.length>0?t.join(","):""},this.shareTwitter=function(e){e.preventDefault();var t="“"+i.smart_truncate(i.textSelection.trim(),114)+"”",s="http://twitter.com/intent/tweet?text="+encodeURIComponent(t)+"&related="+i.relatedTwitterAccounts+"&url="+encodeURIComponent(window.location.href);i.viaTwitterAccount&&t.length<114-i.viaTwitterAccount.length&&(s+="&via="+i.viaTwitterAccount);var n=640,o=440,r=screen.width/2-n/2,a=screen.height/2-o/2-100;return window.open(s,"share_twitter","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+o+", top="+a+", left="+r),i.hide(),!1},this.shareFacebook=function(e){e.preventDefault();var t=i.htmlSelection.replace(/<p[^>]*>/gi,"\n").replace(/<\/p>|  /gi,"").trim(),s="https://www.facebook.com/dialog/feed?app_id="+i.appId+"&display=popup&caption="+encodeURIComponent(t)+"&link="+encodeURIComponent(i.url2share)+"&href="+encodeURIComponent(i.url2share)+"&redirect_uri="+encodeURIComponent(i.url2share),n=640,o=440,r=screen.width/2-n/2,a=screen.height/2-o/2-100;window.open(s,"share_facebook","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+o+", top="+a+", left="+r)},this.shareEmail=function(t){var s=i.htmlSelection.replace(/<p[^>]*>/gi,"\n").replace(/<\/p>|  /gi,"").trim(),n={};return n.subject=encodeURIComponent(textShare.trecho+document.title),n.body=encodeURIComponent("“"+s+"”")+"%0D%0A%0D%0AFrom: "+document.title+"%0D%0A"+window.location.href,e(this).attr("href","mailto:?subject="+n.subject+"&body="+n.body),i.hide(),!0},this.render=function(){var t='<div class="selectionSharer" id="selectionSharerPopover" style="position:absolute;">  <div id="selectionSharerPopover-inner">    <ul>      <li><a class="action tweet" href="" title="'+textShare.twitter+'" target="_blank">Tweet</a></li>      <li><a class="action facebook" href="" title="'+textShare.facebook+'" target="_blank">Facebook</a></li>      <li><a class="action email" href="" title="'+textShare.email+'" target="_blank"><svg width="20" height="20"><path stroke="#FFF" stroke-width="6" d="m16,25h82v60H16zl37,37q4,3 8,0l37-37M16,85l30-30m22,0 30,30"/></svg></a></li>    </ul>  </div>  <div class="selectionSharerPopover-clip"><span class="selectionSharerPopover-arrow"></span></div></div>',s='<div id="selectionSharerPopunder" class="selectionSharer">  <div id="selectionSharerPopunder-inner">    <label>'+textShare.compartilhe+'</label>    <ul>      <li><a class="action tweet" href="" title="'+textShare.twitter+'" target="_blank">Tweet</a></li>      <li><a class="action facebook" href="" title="'+textShare.facebook+'" target="_blank">Facebook</a></li>      <li><a class="action email" href="" title="'+textShare.email+'" target="_blank"><svg width="20" height="20"><path stroke="#FFF" stroke-width="6" d="m16,25h82v60H16zl37,37q4,3 8,0l37-37M16,85l30-30m22,0 30,30"/></svg></a></li>    </ul>  </div></div>';i.$popover=e(t),i.$popover.find("a.tweet").click(i.shareTwitter),i.$popover.find("a.facebook").click(i.shareFacebook),i.$popover.find("a.email").click(i.shareEmail),e("body").append(i.$popover),i.$popunder=e(s),i.$popunder.find("a.tweet").click(i.shareTwitter),i.$popunder.find("a.facebook").click(i.shareFacebook),i.$popunder.find("a.email").click(i.shareEmail),e("body").append(i.$popunder),i.appId&&i.url2share&&e(".selectionSharer a.facebook").css("display","inline-block")},this.setElements=function(t){"string"==typeof t&&(t=e(t)),i.$elements=t instanceof e?t:e(t),i.$elements.mouseup(i.show).mousedown(i.hide).addClass("selectionShareable"),i.$elements.bind("touchstart",function(e){i.isMobile=!0}),document.onselectionchange=i.selectionChanged},this.selectionChanged=function(e){i.isMobile&&(i.lastSelectionChanged&&clearTimeout(i.lastSelectionChanged),i.lastSelectionChanged=setTimeout(function(){i.showPopunder(e)},300))},this.render(),t.elements&&this.setElements(t.elements)};e.fn.selectionSharer=function(){var e=new t;return e.setElements(this),this},"function"==typeof define?define(function(){return t.load=function(e,i,s,n){var o=new t;o.setElements("p"),s()},t}):window.SelectionSharer=t}(jQuery);